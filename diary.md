2020/10/02

基本做好了词法分析器，并能有效删除注释部分，在简单的代码测试下没有出现问题。后续计划将字符对应的编码分类优化，并开始基本的解析。对代码输入量大小进行了微调，可以输入更大量的代码进行处理，但处理效率比较低。 今天花了几个小时主要完成了词法分析器的部分，并且做出了过滤注释的效果，且将容纳源代码的字符数控制在了300，明天开始整理目前比较杂乱的编码并进行一些解析

2020/10/03

早上进行了基本的解析，判断函数的开始与结束。今天主要把函数的include与return进行了合并解析为函数的开始与末尾，同时把赋值的内容中的数字部分做了解析，但还没有做变量名称的解析（其实一开始也做了，但bug太多，就先删了），明天继续完善赋值方面的解析，并且在占用字上面加上const并与int联动，此外加上不同的数据类型的赋值解析。今天总用时六小时左右，有两个小时以上是在改bug，有点自闭。

2020/10/04

早上把int赋值的部分完善好了，同时加上了形如int d;的识别，下午准备把浮点的两个数据类型也合并上去。下午已经完善了基本的数据类型的赋值，把const问题处理好了，同时把printf的输入识别做完了，晚上做getchar与scanf两个输入。代码写的很长了，又懒得去封装函数，嵌套太多经常早上写的内容下午就忘了是干啥的，估计也没人看得懂我的代码。下次争取优化下，下次一定。下午已经把输入输出全部解析好了，晚上把int main后面大括号的bug修复一下，然后准备写表达式的解析。到20点为止已经修好了之前提到的bug，现在开始做json的格式，已经基本成型，但还在考虑怎么体现框与框之间的连接部分。晚上开班会，估计也不会有什么新的进展了。

总结：晚上又把if语句的条件与处理过程整合进去了，按目前的代码流程下一步应该写判断循环的部分（数组还没思路），然后是判断表达式的部分。这些都不是太难，但是目前我对json的认识还比较粗浅，只能向json文件中分类提取出各类语句的核心，但还没想到怎么标注出不同语句在程序中的对应位置（讲道理是按树分布的），这部分也算是目前的瓶颈。如果瓶颈得不到突破，那么接下来两天应该就可以写出经过基本解析的代码，可以判断赋值，条件语句，循环等等。

2020/10/05

今天12节课有点忙，也没干啥，对json文件部分有非常粗略的想法。基本结构如下：一级结构：开始，中间过程，结束。二级结构（中间过程）：步骤1、2、3、4、……。三级结构（步骤1）：类型。四级结构：框图内容。等明天实现。

2020/10/06

今天早上把昨天晚上有关结构的设想实现了（虽然有点不同），由于目前还没有做到else的结构所以链接信息就是从上往下连，没有返回的箭头。目前比较大的问题是在cjson语句中输出时要么只能文字要么只能变量，接下来解决这一问题。问题已经解决，不过只修改了一部分代码，明天完善后加入else以及循环的部分。

2020/10/07

把while和else部分完善好了，接下来考虑和graphviz的对接部分。晚上进度非常快，已经能和graphviz进行非常好的联动并输出流程图（例：graph.png）。大部分语句已经可以正确导入，但还有else的部分未能匹配，晚上或者明天继续。*函数、数组与宏的部分在目前的框架下比较难实现，而且时间比较有限，我尽力。

2020/10/08

今早对else语句进行了匹配，优化了循环与判断语句的逻辑结构，但对于else if 类的语句没什么办法。同时加入了普通语句的识别（这块居然最麻烦）。集成了graphviz的绘图功能并实现了在图片生成后自动关闭graphviz并打开图片的功能。下午看看能不能匹配宏。*目前没有完成的部分：函数、数组（可以读入，但不知道怎么在流程图中表示）、else if、宏（同数组）。下午把else if做好了两层嵌套，再多的也没思路了。

总结：“基本”完成要求，但在适应的C语言程序上有比较大的掣肘。

无法满足要求的情况：

1、宏在代码中的调用替换；

2、函数的识别（main函数除外）；

3、四层及以上else if的嵌套；

4、break语句在函数中的具体作用（实在没想清楚break在流程图中应该怎么展示，就把它当做文字展示了）；

5、while与if语句的相互嵌套（个人想法是goto互相套娃，但程序稳定性会变差）；

示例：见graph.png

